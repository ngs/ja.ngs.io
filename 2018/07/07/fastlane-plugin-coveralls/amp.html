<!DOCTYPE html>
<html âš¡ itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <title>Coveralls fastlane ãƒ—ãƒ©ã‚°ã‚¤ãƒ³</title>
    <link itemprop="mainEntityOfPage" rel="canonical" href="https://ja.ngs.io/2018/07/07/fastlane-plugin-coveralls/">
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    <style amp-custom>
      body {
        background-color: white;
        color: #404040;
        font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
        font-size: 14px;
      }
      amp-img {
        background-color: gray;
      }

      .container {
        padding: 0 8px;
      }

      @media (min-width: 480px) {
        .container {
          padding: 0 16px;
        }
      }

    </style>
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <script async src="https://cdn.ampproject.org/v0.js"></script>
  </head>
  <body>
    <article class="container">
      <h1 itemprop="headline">Coveralls fastlane ãƒ—ãƒ©ã‚°ã‚¤ãƒ³</h1>
      <h2 itemprop="author" itemscope itemtype="https://schema.org/Person">
        <span itemprop="name">é•·ç€¬ æ•¦å²</span>
      </h2>
      <time itemprop="datePublished" datetime="2018-07-07T14:59:00+00:00">2018-07-07 14:59</time>
      <meta itemprop="description" content="Published Coveralls plugin for fastlane"></meta>
      <div class="hidden article-metadata"><meta content="Published Coveralls plugin for fastlane" itemprop="headline" /><div itemprop="image" itemscope="" itemtype="http://schema.org/ImageObject"><meta content="2018-07-07-fastlane-plugin-coveralls/main.png" itemprop="url" /><meta content="992" itemprop="width" /><meta content="525" itemprop="height" /></div><div itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization"><meta content="Atsushi Nagase" itemprop="name" /><div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject"><meta content="https://ja.ngs.io/images/amp-logo.png" itemprop="url" /><meta content="600" itemprop="width" /><meta content="60" itemprop="height" /></div></div><meta content="2018-07-07T14:59:00" itemprop="dateModified" /></div>
      <p><amp-img src="/images/2018-07-07-fastlane-plugin-coveralls/main.png" layout="responsive" width="992" height="525"></amp-img></p>

<p>Xcode ã®ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’ <a href="https://coveralls.io/">Coveralls</a> ã¸ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ <a href="https://fastlane.tools/">fastlane</a>&nbsp;<a href="https://github.com/ngs/fastlane-plugin-coveralls">ãƒ—ãƒ©ã‚°ã‚¤ãƒ³</a> ã¨ã€ãã®ä¾å­˜å…ˆã§ã€å˜ä½“ã§ã‚‚ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦åˆ©ç”¨ã§ãã‚‹ <a href="https://github.com/ngs/xccoveralls">xccoveralls</a> ã‚’å…¬é–‹ã—ã¾ã—ãŸã€‚</p>

<ul>
<li><a href="https://github.com/ngs/fastlane-plugin-coveralls">ngs/fastlane-plugin-coveralls</a>
</li><li><a href="https://github.com/ngs/xccoveralls">ngs/xccoveralls</a>
</li></ul>



<h2 id="part-4f0872ac8628f1a9">ä½¿ã£ã¦ã¿ã‚‹</h2>

<p>ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦</p>
<div class="highlight"><pre class="highlight shell"><code>fastlane add_plugin coveralls
</code></pre></div>
<p><code>Fastfile</code> ã«ä»¥ä¸‹ã®è¡Œã‚’è¿½åŠ </p>
<div class="highlight"><pre class="highlight ruby"><code><span class="n">lane</span> <span class="ss">:send_coveralls</span> <span class="k">do</span>
  <span class="n">coveralls</span>
<span class="k">end</span>
</code></pre></div>
<p>ãƒ†ã‚¹ãƒˆã‚¿ãƒ¼ã‚²ãƒƒãƒˆã® <code>Code Coverage</code>ã€€ã®ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚’ã‚ªãƒ³ã«è¨­å®šã—</p>

<p><amp-img src="/images/2018-07-07-fastlane-plugin-coveralls/checkbox.png" layout="responsive" width="992" height="525"></amp-img></p>

<p><code>fastlane</code> ã‚³ãƒãƒ³ãƒ‰ã‚ˆã‚Šã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’é€ä¿¡ã§ãã¾ã™</p>
<div class="highlight"><pre class="highlight shell"><code><span class="nb">export </span><span class="nv">XCCOVERALLS_REPO_TOKEN</span><span class="o">=</span>... <span class="c"># Coveralls.io ã‹ã‚‰è‡ªåˆ†ã®ã‚‚ã®ã‚’å–ã£ã¦ãã‚‹</span>
bundle <span class="nb">exec </span>fastlane send_coveralls
</code></pre></div>
<p>ä¾‹ã¨ã—ã¦ <a href="https://github.com/ngs/ci2go">CI2Go</a> ã®ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’ <a href="https://coveralls.io/github/ngs/ci2go">Coveralls</a> ã§ã€ãã®è¨­å®šã‚’<a href="https://github.com/ngs/ci2go/blob/master/fastlane/Fastfile#L119-L124">Fastfile</a> ã§ç¢ºèªã„ãŸã ã‘ã¾ã™ã€‚</p>

<h2 id="part-f6f3a1d624113ad7">é–‹ç™ºã®ãã£ã‹ã‘</h2>

<p><a href="https://docs.fastlane.tools/actions/xcov/">fastlane ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</a> ã¨ã—ã¦çµ„ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ <a href="https://github.com/nakiostudio/xcov">Xcov</a> ã‚’åˆ©ç”¨ã—ã‚ˆã†ã¨ã—ã¾ã—ãŸã€‚</p>

<p>ã—ã‹ã—ã€Xcov ã¯ã‚«ãƒãƒ¬ãƒƒã‚¸ã®è¦ç´„ã®ã¿ä¿æŒã—ã¦ã„ã‚‹ <code>.xccovreport</code> ã¾ãŸã¯ <code>.xccoverage</code> ã®æƒ…å ±ã‚’å–å¾—ã—ã¦é€ä¿¡ã—ã¦ã„ã‚‹ãŸã‚ã€ã‚«ãƒãƒ¼è¡Œã®æƒ…å ±ã¾ã§é€ä¿¡ã—ã¾ã›ã‚“ã€‚</p>

<p>ãã“ã§ã€Xcode 9.3 ã‚ˆã‚Šæä¾›ã•ã‚Œã¦ã„ã‚‹ <code>xcrun xccov</code> ã‚’åˆ©ç”¨ã—ã¦ã€æ–°ãŸã«ã“ã®ãƒ„ãƒ¼ãƒ«ã‚’å®Ÿè£…ã—ã¾ã—ãŸã€‚</p>
<div class="highlight"><pre class="highlight shell"><code><span class="c"># ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸€è¦§ã‚’å–å¾—ã™ã‚‹</span>
<span class="nv">$ </span>xcrun xccov view <span class="nt">--file-list</span> DerivedData/Logs/Build/<span class="k">*</span>.xccovarchive

<span class="c"># ç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’å–å¾—ã™ã‚‹</span>
<span class="nv">$ </span>xcrun xccov view <span class="nt">--file</span> /Users/ngs/src/CI2Go/AppDelegate.swift <span class="se">\</span>
    DerivedData/Logs/Build/<span class="k">*</span>.xccovarchive
</code></pre></div>
<p>å‚ç…§: <a href="https://medium.com/xcblog/xccov-xcode-code-coverage-report-for-humans-466a4865aa18">xccov: Xcode Code Coverage Report for Humans</a></p>

<p>ã‚‚ã—ä½•ã‹å•é¡ŒãŒã‚ã‚Šã¾ã—ãŸã‚‰ <a href="https://github.com/ngs/fastlane-plugin-coveralls/issues">ã‚¤ã‚·ãƒ¥ãƒ¼</a> ã‚’èµ·ç¥¨ã„ã ãŸã‘ã‚‹ã¨å¬‰ã—ã„ã§ã™ã€‚</p>

<p>ã§ã¯ XCTesting ã‚’æ¥½ã—ã‚“ã§ãã ã•ã„ ğŸ‘¨â€ğŸ’»</p>

    </article>
  </body>
</html>
