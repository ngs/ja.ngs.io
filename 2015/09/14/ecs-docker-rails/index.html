<!DOCTYPE html><html itemscope="itemscope" itemtype="http://schema.org/WebSite" lang="ja"><head><meta charset="utf-8" /><meta content="IE=edge;chrome=1" http_equiv="X-UA-Compatible" /><meta content="width=device-width, initial-scale=1, maximum-scale=1" name="viewport" /><meta content="Middleman 4.3.7" name="generator" /><meta content="https://ja.ngs.io" itemprop="url" /><link href="/about/" rel="author" /><title>Rails アプリの Docker Image ビルドと Amazon EC2 Container Service へのデプロイの自動化 - Atsushi Nagase</title><meta content="250606621791116" property="fb:app_id" /><meta content="1034163350" property="fb:admins" /><meta content="271342209870640" property="fb:pages" /><meta content="Rails アプリの Docker Image ビルドと Amazon EC2 Container Service へのデプロイの自動化" property="og:title" /><meta content="Rails アプリの Docker Image ビルドと Amazon EC2 Container Service へのデプロイの自動化" property="twitter:title" /><meta content="ja.ngs.io" property="og:site_name" /><meta content="ja_JP" property="og:locale" /><meta content="article" property="og:type" /><meta content="現在構築中のサービスの Rails アプリケーションのインフラとして、Amazon EC2 Container Service (ECS) を採用し、自動化を頑張ってみた内容を公開します。" property="og:description" /><meta content="現在構築中のサービスの Rails アプリケーションのインフラとして、Amazon EC2 Container Service (ECS) を採用し、自動化を頑張ってみた内容を公開します。" property="twitter:description" /><meta content="https://ja.ngs.io/images/2015-09-14-ecs-docker-rails/build-docker-image.png" property="og:image" /><meta content="https://ja.ngs.io/images/2015-09-14-ecs-docker-rails/build-docker-image.png" property="twitter:image" /><meta content="992" property="og:image:width" /><meta content="525" property="og:image:height" /><meta content="image/png" property="og:image:type" /><meta content="https://ja.ngs.io/2015/09/14/ecs-docker-rails/" property="og:url" /><meta content="https://ja.ngs.io/2015/09/14/ecs-docker-rails/" property="twitter:url" /><meta content="summary" property="twitter:card" /><meta content="@ngs" property="twitter:site" /><meta content="2015-09-13T22:45:00Z" property="article:published_time" /><meta content="aws" property="article:tag" /><meta content="ecs" property="article:tag" /><meta content="rails" property="article:tag" /><meta content="docker" property="article:tag" /><meta content="infrastructure" property="article:tag" /><meta content="circleci" property="article:tag" /><meta content="serverspec" property="article:tag" /><noscript><link href="/stylesheets/bootstrap-082333cc.css" rel="stylesheet" /></noscript><link href="/stylesheets/application-69767f89.css" rel="stylesheet" media="screen" /><link href="/stylesheets/syntax-802a4516.css" rel="stylesheet" media="screen" /><link href="/stylesheets/print-1b69733c.css" rel="stylesheet" media="print" /><script crossorigin="anonymous" src="https://kit.fontawesome.com/2e4b3f49e4.js"></script><script src="/javascripts/application-4f14d2b8.js"></script><meta content="現在構築中のサービスの Rails アプリケーションのインフラとして、Amazon EC2 Container Service (ECS) を採用し、自動化を頑張ってみた内容を公開します。" name="description" /><meta content="aws,ecs,rails,docker,infrastructure,circleci,serverspec" name="keywords" /><meta content="長瀬 敦史" name="author" /><link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" /><link rel="alternate" type="application/rss+xml" title="RSS 2.0 Feed" href="/rss.xml" /><link href="/apple-touch-icon-152x152-precomposed.png" rel="apple-touch-icon" size="152x152" /><link href="/apple-touch-icon-144x144-precomposed.png" rel="apple-touch-icon" size="144x144" /><link href="/apple-touch-icon-120x120-precomposed.png" rel="apple-touch-icon" size="120x120" /><link href="/apple-touch-icon-114x114-precomposed.png" rel="apple-touch-icon" size="114x114" /><link href="/apple-touch-icon-76x76-precomposed.png" rel="apple-touch-icon" size="76x76" /><link href="/apple-touch-icon-72x72-precomposed.png" rel="apple-touch-icon" size="72x72" /><link href="/apple-touch-icon-60x60-precomposed.png" rel="apple-touch-icon" size="60x60" /><link href="/apple-touch-icon-67x67-precomposed.png" rel="apple-touch-icon" size="67x67" /><link href="/apple-touch-icon-precomposed.png" rel="apple-touch-icon" /><link href="/favicon.png" rel="shortcut icon" /><link href="/favicon.ico" rel="icon" type="image/ico" /><link href="/2015/09/14/ecs-docker-rails/amp.html" rel="amphtml" /><link href="/2015/08/01/hello-oneteam/" rel="prev" /><link href="/2015/09/26/circleci-docker-serverspec/" rel="next" /></head><body><div class="container" data-scrapmd-ok="ok"><div class="row"><main class="col-md-9" role="main"><article class="entry" data-scrapmd-ok="ok" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 itemprop="name">Rails アプリの Docker Image ビルドと Amazon EC2 Container Service へのデプロイの自動化</h1><div class="hidden article-metadata"><meta content="現在構築中のサービスの Rails アプリケーションのインフラとして、Amazon EC2 Container Service (ECS) を採用し、自動化を頑張ってみた内容を公開します。" itemprop="headline" /><div itemprop="image" itemscope="" itemtype="http://schema.org/ImageObject"><meta content="2015-09-14-ecs-docker-rails/build-docker-image.png" itemprop="url" /><meta content="992" itemprop="width" /><meta content="525" itemprop="height" /></div><div itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization"><meta content="Atsushi Nagase" itemprop="name" /><div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject"><meta content="https://ja.ngs.io/images/amp-logo.png" itemprop="url" /><meta content="600" itemprop="width" /><meta content="60" itemprop="height" /></div></div><meta content="2015-09-13T22:45:00" itemprop="dateModified" /></div><p class="meta"><time datetime="2015-09-13T22:45:00+00:00" is="relative-time" itemprop="datePublished">2015-09-13 22:45</time></p></header><div class="article-body" itemprop="articleBody"><p>現在構築中のサービスの Rails アプリケーションのインフラとして、<a href="https://aws.amazon.com/jp/ecs/">Amazon EC2 Container Service</a> (ECS) を採用し、自動化を頑張ってみた内容を公開します。</p>&#x000A;&#x000A;<p>サンプルコード、Docker Image はそれぞれ、以下で公開しています。</p>&#x000A;&#x000A;<ul>&#x000A;<li><a href="https://github.com/ngs/docker-rails-example">ngs/docker-rails-example on GitHub</a>&#x000A;</li><li><a href="https://quay.io/repository/atsnngs/docker-rails-example">atsnngs/docker-rails-example on Quay.io</a>&#x000A;</li><li><a href="https://circleci.com/gh/ngs/docker-rails-example">ngs/docker-rails-example on CircleCI</a>&#x000A;</li></ul>&#x000A;&#x000A;<p></p>&#x000A;&#x000A;<h2 id="part-6542c7f9ebb">構成</h2>&#x000A;&#x000A;<p>今回開発しているアプリケーションは、以下の様な構成です。</p>&#x000A;&#x000A;<ul>&#x000A;<li>Rails 4.2&#x000A;</li><li>MySQL (Amazon RDS)&#x000A;</li><li>Redis (ElastiCache)&#x000A;</li><li><a href="http://nginx.org/">nginx</a> + <a href="http://unicorn.bogomips.org/">unicorn</a> socket&#x000A;</li><li>ActiveJob + <a href="http://sidekiq.org/">Sidekiq</a>&#x000A;</li></ul>&#x000A;&#x000A;<h2 id="ci">CI フロー</h2>&#x000A;&#x000A;<p><a href="https://github.com/ngs/docker-rails-example/blob/master/circle.yml">circle.yml</a> に以下の様な処理フローを設定しています。</p>&#x000A;&#x000A;<ul>&#x000A;<li><code>dependencies/override</code>&#x000A;&#x000A;<ul>&#x000A;<li>awscli, jq インストール&#x000A;</li><li>依存 Gem Library, Docker Image インストール&#x000A;</li><li>MySQL, Redis コンテナ起動&#x000A;</li><li>Docker Image ビルド&#x000A;</li><li>Serverspec の依存ライブラリインストール&#x000A;</li></ul>&#x000A;</li><li><code>test/override</code>&#x000A;&#x000A;<ul>&#x000A;<li>Rails アプリケーション側の Rspec&#x000A;</li><li>Docker Image の Serverspec&#x000A;</li></ul>&#x000A;</li><li><code>test/post</code>&#x000A;&#x000A;<ul>&#x000A;<li>CI ビルド毎の Docker Image をレジストリーに Push&#x000A;</li><li><code>${DOCKER_REPO}:web-b${CIRCLE_BUILD_NUM}</code>&#x000A;</li><li><code>${DOCKER_REPO}:job-b${CIRCLE_BUILD_NUM}</code>&#x000A;</li></ul>&#x000A;</li><li><code>master</code> ブランチ: ビルド番号なしの Docker Image をレジストリーに Push&#x000A;&#x000A;<ul>&#x000A;<li><code>${DOCKER_REPO}:web</code>&#x000A;</li><li><code>${DOCKER_REPO}:job</code>&#x000A;</li></ul>&#x000A;</li><li><code>deployment/$ENV_NAME</code> ブランチ&#x000A;&#x000A;<ul>&#x000A;<li>ビルド番号付きの Docker Image をソースに、Task Definition を作成&#x000A;</li><li><code>db:migrate</code> 用のタスクを作成&#x000A;</li><li>Service を更新する&#x000A;</li><li>既存タスクを終了させる (無停止デプロイは未設定)&#x000A;</li></ul>&#x000A;</li></ul>&#x000A;&#x000A;<h2 id="roles">Roles</h2>&#x000A;&#x000A;<p>以下の 2つの Role を持つコンテナを起動します。</p>&#x000A;&#x000A;<ul>&#x000A;<li><code>job</code>&#x000A;&#x000A;<ul>&#x000A;<li><a href="http://sidekiq.org/">Sidekiq</a> のデーモンを常駐させる&#x000A;</li><li>Cron で Rake Task を実行する&#x000A;</li></ul>&#x000A;</li><li><code>web</code>&#x000A;&#x000A;<ul>&#x000A;<li><a href="http://nginx.org/">nginx</a>&#x000A;</li><li><a href="http://unicorn.bogomips.org/">unicorn</a>&#x000A;</li></ul>&#x000A;</li></ul>&#x000A;&#x000A;<p>常駐プロセスは <a href="http://supervisord.org/">Supervisor</a> で監視します。</p>&#x000A;&#x000A;<h2 id="part-2d313cb9957a20b5">環境変数</h2>&#x000A;&#x000A;<p>CircleCI 上で、以下の環境変数を <em>Project Settings &gt; Environment variables</em> にて設定しています。</p>&#x000A;<table class="table table-bordered"><thead><tr>&#x000A;<th>Name</th>&#x000A;<th>Description</th>&#x000A;</tr>&#x000A;</thead><tbody><tr>&#x000A;<td><code>AWS_DEFAULT_REGION</code></td>&#x000A;<td>AWS Commandline 用。今回は <code>us-east-1</code> を使いました。</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td><code>DATABASE_URL_PRODUCTION</code></td>&#x000A;<td>Production 環境用の <code>DATABASE_URL</code>.<br>例: <code>mysql2://root:password@docker-rails-example.xxxxx.us-east-1.rds.amazonaws.com:3306/docker_rails_example_production</code></td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td><code>DOCKER_EMAIL</code></td>&#x000A;<td>レジストリーの Email。Robot user の場合 <code>.</code> で OK</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td><code>DOCKER_PASS</code></td>&#x000A;<td>レジストリーの Password</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td><code>DOCKER_REPO_HOST</code></td>&#x000A;<td>レジストリーの Host: <code>quay.io</code></td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td><code>DOCKER_REPO</code></td>&#x000A;<td>リポジトリ名: <code>quay.io/atsnngs/docker-rails-example</code></td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td><code>DOCKER_USER</code></td>&#x000A;<td>レジストリーの Username</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td><code>REDIS_URL_PRODUCTION</code></td>&#x000A;<td>Production 環境用の <code>REDIS_URL</code>.<br>例: <code>redis://docker-rails-example.xxxx.0001.use1.cache.amazonaws.com/sidekiq_production</code></td>&#x000A;</tr>&#x000A;</body></table>&#x000A;<p>AWS の Credential は <em>Project Settings &gt; AWS permissions</em> にて設定しています。</p>&#x000A;&#x000A;<h2 id="dockerfile">Dockerfile</h2>&#x000A;&#x000A;<p>2つの Role によって、分岐が発生するので、Erb テンプレートで条件分岐と環境変数の出力を行います。</p>&#x000A;&#x000A;<h3 id="dockerfile-erb">Dockerfile.erb</h3>&#x000A;<div class="highlight"><pre class="highlight shell"><code>FROM ubuntu:14.04&#x000A;MAINTAINER Atsushi Nagase&lt;a@ngs.io&gt;&#x000A;&#x000A;RUN apt-get update <span class="nt">-y</span> <span class="o">&amp;&amp;</span> apt-get <span class="nb">install</span> <span class="nt">-y</span> software-properties-common&#x000A;RUN apt-add-repository <span class="nt">-y</span> ppa:nginx/stable&#x000A;RUN apt-add-repository <span class="nt">-y</span> ppa:brightbox/ruby-ng&#x000A;RUN apt-get update <span class="nt">-y</span> <span class="o">&amp;&amp;</span> apt-get <span class="nb">install</span> <span class="nt">-y</span> <span class="se">\</span>&#x000A;    locales <span class="se">\</span>&#x000A;    language-pack-en <span class="se">\</span>&#x000A;    language-pack-en-base <span class="se">\</span>&#x000A;    openssh-server <span class="se">\</span>&#x000A;    curl <span class="se">\</span>&#x000A;    supervisor <span class="se">\</span>&#x000A;    build-essential <span class="se">\</span>&#x000A;    git-core <span class="se">\</span>&#x000A;    g++ <span class="se">\</span>&#x000A;    libcurl4-openssl-dev <span class="se">\</span>&#x000A;    libffi-dev <span class="se">\</span>&#x000A;    libmysqlclient-dev <span class="se">\</span>&#x000A;    libreadline-dev <span class="se">\</span>&#x000A;    libsqlite3-dev <span class="se">\</span>&#x000A;    libssl-dev <span class="se">\</span>&#x000A;    libxml2 <span class="se">\</span>&#x000A;    libxml2-dev <span class="se">\</span>&#x000A;    libxslt1-dev <span class="se">\</span>&#x000A;    libyaml-dev <span class="se">\</span>&#x000A;    python-software-properties <span class="se">\</span>&#x000A;    zlib1g-dev <span class="se">\</span>&#x000A;    ruby2.2-dev <span class="se">\</span>&#x000A;    ruby2.2&#x000A;&#x000A;ENV <span class="se">\</span>&#x000A;  <span class="nv">BUNDLE_PATH</span><span class="o">=</span>/var/www/shared/vendor/bundle <span class="se">\</span>&#x000A;  <span class="nv">RAILS_ENV</span><span class="o">=</span>production <span class="se">\</span>&#x000A;  <span class="nv">RAILS_ROOT</span><span class="o">=</span>/var/www/app&#x000A;&#x000A;RUN gem <span class="nb">install </span>bundler <span class="nt">--no-rdoc</span> <span class="nt">--no-ri</span>&#x000A;RUN <span class="nb">mkdir</span> <span class="nt">-p</span> <span class="nv">$RAILS_ROOT</span>&#x000A;WORKDIR <span class="k">${</span><span class="nv">RAILS_ROOT</span><span class="k">}</span>&#x000A;&#x000A;RUN <span class="o">(</span><span class="nb">echo</span> &lt;%<span class="o">=</span> <span class="sb">`</span><span class="nb">cat </span>Gemfile<span class="sb">`</span>.inspect %&gt; <span class="o">&gt;</span> <span class="s2">"</span><span class="k">${</span><span class="nv">RAILS_ROOT</span><span class="k">}</span><span class="s2">/Gemfile"</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="nb">echo</span> &lt;%<span class="o">=</span> <span class="sb">`</span><span class="nb">cat </span>Gemfile.lock<span class="sb">`</span>.inspect %&gt; <span class="o">&gt;</span> <span class="s2">"</span><span class="k">${</span><span class="nv">RAILS_ROOT</span><span class="k">}</span><span class="s2">/Gemfile.lock"</span><span class="o">)</span>&#x000A;RUN <span class="nb">mkdir</span> <span class="nt">-p</span> <span class="nv">$BUNDLE_PATH</span> <span class="o">&amp;&amp;</span> <span class="se">\</span>&#x000A;  <span class="nb">mkdir</span> <span class="nt">-p</span> vendor <span class="o">&amp;&amp;</span> <span class="se">\</span>&#x000A;  <span class="nb">rm</span> <span class="nt">-rf</span> vendor/bundle <span class="o">&amp;&amp;</span> <span class="se">\</span>&#x000A;  <span class="nb">ln</span> <span class="nt">-s</span> <span class="nv">$BUNDLE_PATH</span> vendor/bundle <span class="o">&amp;&amp;</span> <span class="se">\</span>&#x000A;  <span class="o">(</span>bundle check <span class="o">||</span> bundle <span class="nb">install</span> <span class="nt">--without</span> <span class="nb">test </span>development darwin assets <span class="nt">--jobs</span> 4 <span class="nt">--retry</span> 3 <span class="nt">--deployment</span><span class="o">)</span>&#x000A;&#x000A;<span class="c">## Locales</span>&#x000A;RUN <span class="o">[</span> <span class="nt">-f</span> /var/lib/locales/supported.d/local <span class="o">]</span> <span class="o">||</span> <span class="nb">touch</span> /var/lib/locales/supported.d/local&#x000A;RUN <span class="nb">echo</span> <span class="s1">'LANG="en_US.UTF-8"'</span> <span class="o">&gt;</span> /etc/default/locale&#x000A;RUN dpkg-reconfigure <span class="nt">--frontend</span> noninteractive locales&#x000A;&#x000A;RUN <span class="nb">echo</span> &lt;%<span class="o">=</span> <span class="sb">`</span><span class="nb">cat </span>docker/files/etc/supervisor/supervisord.conf<span class="sb">`</span>.inspect %&gt; <span class="o">&gt;</span> /etc/supervisor/supervisord.conf&#x000A;&#x000A;&lt;% <span class="k">if </span>ENV[<span class="s1">'ROLE'</span><span class="o">]</span> <span class="o">==</span> <span class="s1">'web'</span> %&gt;&#x000A;RUN apt-get update <span class="nt">-y</span> <span class="o">&amp;&amp;</span> apt-get <span class="nb">install</span> <span class="nt">-y</span> nginx&#x000A;&lt;% end %&gt;&#x000A;&#x000A;COPY <span class="nb">.</span> <span class="nv">$RAILS_ROOT</span>&#x000A;WORKDIR <span class="k">${</span><span class="nv">RAILS_ROOT</span><span class="k">}</span>&#x000A;&#x000A;RUN <span class="nb">mkdir</span> <span class="nt">-p</span> <span class="nv">$BUNDLE_PATH</span> <span class="o">&amp;&amp;</span> <span class="se">\</span>&#x000A;  <span class="nb">mkdir</span> <span class="nt">-p</span> vendor <span class="o">&amp;&amp;</span> <span class="se">\</span>&#x000A;  <span class="nb">rm</span> <span class="nt">-rf</span> vendor/bundle <span class="o">&amp;&amp;</span> <span class="se">\</span>&#x000A;  <span class="nb">ln</span> <span class="nt">-s</span> <span class="nv">$BUNDLE_PATH</span> vendor/bundle <span class="o">&amp;&amp;</span> <span class="se">\</span>&#x000A;  <span class="o">(</span>bundle check <span class="o">||</span> bundle <span class="nb">install</span> <span class="nt">--without</span> <span class="nb">test </span>development darwin assets <span class="nt">--jobs</span> 4 <span class="nt">--retry</span> 3 <span class="nt">--deployment</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="se">\</span>&#x000A;  <span class="o">(</span><span class="nb">echo</span> <span class="s2">"SECRET_KEY_BASE=</span><span class="si">$(</span>./bin/rake secret<span class="si">)</span><span class="s2">"</span> <span class="o">&gt;</span> .env<span class="o">)</span>&#x000A;&#x000A;ENV <span class="nv">ROLE</span><span class="o">=</span>&lt;%<span class="o">=</span> ENV[<span class="s1">'ROLE'</span><span class="o">]</span> %&gt;&#x000A;&#x000A;&lt;% <span class="k">if </span>ENV[<span class="s1">'ROLE'</span><span class="o">]</span> <span class="o">==</span> <span class="s1">'web'</span> %&gt;&#x000A;EXPOSE 80&#x000A;ADD docker/files/etc/supervisor/conf.d/nginx.conf /etc/supervisor/conf.d/nginx.conf&#x000A;ADD docker/files/etc/supervisor/conf.d/unicorn.conf /etc/supervisor/conf.d/unicorn.conf&#x000A;ADD docker/files/etc/nginx/nginx.conf /etc/nginx/nginx.conf&#x000A;ADD docker/files/etc/init.d/unicorn /etc/init.d/unicorn&#x000A;RUN <span class="nb">chmod</span> +x /etc/init.d/unicorn&#x000A;&lt;% elsif ENV[<span class="s1">'ROLE'</span><span class="o">]</span> <span class="o">==</span> <span class="s1">'job'</span> %&gt;&#x000A;ADD docker/files/etc/supervisor/conf.d/sidekiq.conf /etc/supervisor/conf.d/sidekiq.conf&#x000A;ADD docker/files/etc/init.d/sidekiq /etc/init.d/sidekiq&#x000A;RUN <span class="nb">chmod</span> +x /etc/init.d/sidekiq&#x000A;&lt;% end %&gt;&#x000A;&#x000A;CMD <span class="o">[</span><span class="s2">"/bin/sh"</span>, <span class="s2">"/var/www/app/script/run-supervisord.sh"</span><span class="o">]</span>&#x000A;</code></pre></div>&#x000A;<p><code>COPY . $RAILS_ROOT</code> でプロジェクトディレクトリをコピーするまでは、</p>&#x000A;<div class="highlight"><pre class="highlight shell"><code>RUN <span class="nb">echo</span> &lt;%<span class="o">=</span> <span class="sb">`</span><span class="nb">cat </span>docker/files/etc/supervisor/supervisord.conf<span class="sb">`</span>.inspect %&gt; <span class="o">&gt;</span> <span class="se">\</span>&#x000A;  /etc/supervisor/supervisord.conf&#x000A;</code></pre></div>&#x000A;<p>の様に、<code>ADD</code> コマンドを使わず、ビルド時に更新タイムスタンプを元に更新の有無を見ているため、&#x000A;キャッシュが無効になり、毎回ビルドが走ってしまうのを回避しています。</p>&#x000A;&#x000A;<p><img src="/images/2015-09-14-ecs-docker-rails/visualize-images.png" alt="" /></p>&#x000A;&#x000A;<h2 id="docker-image">Docker Image をビルドする</h2>&#x000A;&#x000A;<p><img src="/images/2015-09-14-ecs-docker-rails/build-docker-image.png" alt="" /></p>&#x000A;&#x000A;<p>上記の <code>Dockerfile.erb</code> をレンダリングして、<code>docker build</code> コマンドを実行します。</p>&#x000A;<div class="highlight"><pre class="highlight shell"><code><span class="nv">ROLE</span><span class="o">=</span>web ./script/build-docker.sh&#x000A;</code></pre></div>&#x000A;<h3 id="build-docker-sh">build-docker.sh</h3>&#x000A;<div class="highlight"><pre class="highlight shell"><code><span class="c">#!/bin/sh</span>&#x000A;<span class="nb">set</span> <span class="nt">-eu</span>&#x000A;&#x000A;erb Dockerfile.erb <span class="o">&gt;</span> Dockerfile&#x000A;docker build <span class="nt">-t</span> <span class="s2">"</span><span class="k">${</span><span class="nv">DOCKER_REPO</span><span class="k">}</span><span class="s2">:</span><span class="k">${</span><span class="nv">ROLE</span><span class="k">}</span><span class="s2">"</span> <span class="nb">.</span>&#x000A;</code></pre></div>&#x000A;<h2 id="serverspec-image"><a href="http://serverspec.org/">Serverspec</a> でビルドした Image をテストする</h2>&#x000A;&#x000A;<p><img src="/images/2015-09-14-ecs-docker-rails/serverspec.png" alt="" /></p>&#x000A;&#x000A;<p>テスト用の MySQL, Redis のイメージを Pull し、デーモン起動しておきます。</p>&#x000A;<div class="highlight"><pre class="highlight shell"><code>docker pull redis&#x000A;docker pull mysql&#x000A;docker run <span class="nt">--name</span> dev-redis <span class="nt">-d</span> redis&#x000A;docker run <span class="nt">--name</span> dev-mysql <span class="nt">-e</span> <span class="s1">'MYSQL_ROOT_PASSWORD=dev'</span> <span class="nt">-d</span> mysql&#x000A;</code></pre></div>&#x000A;<p>スクリプトを実行します</p>&#x000A;<div class="highlight"><pre class="highlight plaintext"><code>TARGET=${DOCKER_REPO}:web ./script/run-server-spec.sh&#x000A;</code></pre></div>&#x000A;<h3 id="run-server-spec-sh">run-server-spec.sh</h3>&#x000A;<div class="highlight"><pre class="highlight shell"><code><span class="c">#!/bin/sh</span>&#x000A;<span class="nb">set</span> <span class="nt">-eu</span>&#x000A;&#x000A;<span class="nv">HASH</span><span class="o">=</span><span class="si">$(</span>openssl rand <span class="nt">-hex</span> 4<span class="si">)</span>&#x000A;<span class="nv">DATABASE_URL</span><span class="o">=</span>mysql2://root:dev@dev-mysql/docker-rails-example&#x000A;<span class="nv">REDIS_URL</span><span class="o">=</span>redis://dev-redis:6379/dev&#x000A;&#x000A;docker run <span class="se">\</span>&#x000A;  <span class="nt">-e</span> <span class="nv">DATABASE_URL</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">DATABASE_URL</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>&#x000A;  <span class="nt">-e</span> <span class="nv">REDIS_URL</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">REDIS_URL</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>&#x000A;  <span class="nt">--link</span> dev-mysql:mysql <span class="se">\</span>&#x000A;  <span class="nt">--link</span> dev-redis:redis <span class="se">\</span>&#x000A;  <span class="nt">--name</span> <span class="s2">"dbmigrate-</span><span class="k">${</span><span class="nv">HASH</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>&#x000A;  <span class="nt">-w</span> /var/www/app <span class="nt">-t</span> <span class="nv">$TARGET</span> <span class="se">\</span>&#x000A;  sh <span class="nt">-c</span> <span class="s1">'./bin/rake db:create; ./bin/rake db:migrate:reset'</span>&#x000A;&#x000A;docker run <span class="se">\</span>&#x000A;  <span class="nt">-e</span> <span class="nv">DATABASE_URL</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">DATABASE_URL</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>&#x000A;  <span class="nt">-e</span> <span class="nv">REDIS_URL</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">REDIS_URL</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>&#x000A;  <span class="nt">-v</span> <span class="s2">"</span><span class="si">$(</span><span class="nb">pwd</span><span class="si">)</span><span class="s2">/docker/serverspec"</span><span class="se">\:</span>/mnt/serverspec <span class="se">\</span>&#x000A;  <span class="nt">--name</span> <span class="s2">"serverspec-</span><span class="k">${</span><span class="nv">HASH</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>&#x000A;  <span class="nt">--link</span> dev-mysql:mysql <span class="se">\</span>&#x000A;  <span class="nt">--link</span> dev-redis:redis <span class="se">\</span>&#x000A;  <span class="nt">-w</span> /mnt/serverspec <span class="nt">-t</span> <span class="nv">$TARGET</span> <span class="se">\</span>&#x000A;  sh <span class="nt">-c</span> <span class="s1">'echo "DATABASE_URL=${DATABASE_URL}" &gt;&gt; /var/www/app/.env &amp;&amp; echo "REDIS_URL=${REDIS_URL}" &gt;&gt; /var/www/app/.env &amp;&amp; service supervisor start &amp;&amp; bundle install --path=vendor/bundle &amp;&amp; sleep 10 &amp;&amp; bundle exec rake spec'</span>&#x000A;&#x000A;<span class="nb">set</span> +eu&#x000A;<span class="o">[</span> <span class="nv">$CI</span> <span class="o">]</span> <span class="o">||</span> docker <span class="nb">rm</span> <span class="s2">"dbmigrate-</span><span class="k">${</span><span class="nv">HASH</span><span class="k">}</span><span class="s2">"</span>&#x000A;<span class="o">[</span> <span class="nv">$CI</span> <span class="o">]</span> <span class="o">||</span> docker <span class="nb">rm</span> <span class="s2">"serverspec-</span><span class="k">${</span><span class="nv">HASH</span><span class="k">}</span><span class="s2">"</span>&#x000A;</code></pre></div>&#x000A;<p>最後の2行は、<a href="https://circleci.com/">CircleCI</a> 上で Docker Container を削除しようとすると、<code>Failed to destroy btrfs snapshot: operation not permitted</code> というエラーで失敗するため、ローカル環境など、<code>CI</code> 環境変数がセットされていない場合にのみ、Container の削除を行う様にしています。</p>&#x000A;&#x000A;<h2 id="amazon-ec2-container-service"><a href="https://aws.amazon.com/jp/ecs/">Amazon EC2 Container Service</a> にデプロイ</h2>&#x000A;&#x000A;<p>前途のとおり、<code>db:migrate</code> 用のタスクを作成し、常駐プロセスが起動する、Task を Service に設定します。</p>&#x000A;<div class="highlight"><pre class="highlight shell"><code><span class="nb">export </span><span class="nv">ENV_NAME</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> <span class="nv">$CIRCLE_BRANCH</span> | <span class="nb">sed</span> <span class="s1">'s/deployment\///'</span><span class="sb">`</span> <span class="o">&amp;&amp;</span> <span class="se">\</span>&#x000A;/bin/sh script/ecs-deploy-db-migrate.sh <span class="o">&amp;&amp;</span> <span class="se">\</span>&#x000A;<span class="nb">sleep </span>5 <span class="o">&amp;&amp;</span> <span class="se">\</span>&#x000A;/bin/sh script/ecs-deploy-services.sh&#x000A;</code></pre></div>&#x000A;<p>Task Definition の Erb テンプレートをレンダリングして、実行中のビルド固有のタスクを定義します。</p>&#x000A;&#x000A;<p>本番環境用の Redis, MySQL の URL を、予め <code>_PRODUCTION</code> の接尾辞を付けて環境変数に設定していたものから取得し、この定義ファイルに、<code>REDIS_URL</code>, <code>DATABASE_URL</code> として上書きする記述を行います。</p>&#x000A;&#x000A;<h3 id="ecs-deploy-db-migrate-sh">ecs-deploy-db-migrate.sh</h3>&#x000A;&#x000A;<p><code>rake db:migrate</code> を実行するタスクを作成します。</p>&#x000A;<div class="highlight"><pre class="highlight shell"><code><span class="c">#!/bin/sh</span>&#x000A;<span class="nb">set</span> <span class="nt">-eu</span>&#x000A;&#x000A;<span class="nv">CLUSTER</span><span class="o">=</span>default&#x000A;<span class="nv">UPPER_ENV_NAME</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nv">$ENV_NAME</span> | <span class="nb">awk</span> <span class="s1">'{print toupper($0)}'</span><span class="si">)</span>&#x000A;<span class="nv">DATABASE_URL</span><span class="o">=</span><span class="si">$(</span><span class="nb">eval</span> <span class="s2">"echo </span><span class="se">\$</span><span class="s2">DATABASE_URL_</span><span class="k">${</span><span class="nv">UPPER_ENV_NAME</span><span class="k">}</span><span class="s2">"</span><span class="si">)</span>&#x000A;<span class="nv">REDIS_URL</span><span class="o">=</span><span class="si">$(</span><span class="nb">eval</span> <span class="s2">"echo </span><span class="se">\$</span><span class="s2">REDIS_URL_</span><span class="k">${</span><span class="nv">UPPER_ENV_NAME</span><span class="k">}</span><span class="s2">"</span><span class="si">)</span>&#x000A;<span class="nv">APP_NAME</span><span class="o">=</span><span class="s1">'ngs-docker-rails-example-'</span>&#x000A;<span class="nv">TASK_FAMILY</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">APP_NAME</span><span class="k">}</span><span class="s2">db-migrate-</span><span class="k">${</span><span class="nv">ENV_NAME</span><span class="k">}</span><span class="s2">"</span>&#x000A;&#x000A;<span class="nv">REDIS_URL</span><span class="o">=</span><span class="nv">$REDIS_URL</span> <span class="nv">DATABASE_URL</span><span class="o">=</span><span class="nv">$DATABASE_URL</span> <span class="se">\</span>&#x000A;  erb ecs-task-definitions/task-db-migrate.json.erb <span class="o">&gt;</span> .ecs-task-definition.json&#x000A;<span class="nv">TASK_DEFINITION_JSON</span><span class="o">=</span><span class="si">$(</span>aws ecs register-task-definition <span class="nt">--family</span> <span class="nv">$TASK_FAMILY</span> <span class="nt">--cli-input-json</span> <span class="s2">"file://</span><span class="si">$(</span><span class="nb">pwd</span><span class="si">)</span><span class="s2">/.ecs-task-definition.json"</span><span class="si">)</span>&#x000A;<span class="nv">TASK_REVISION</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nv">$TASK_DEFINITION_JSON</span> | jq .taskDefinition.revision<span class="si">)</span>&#x000A;&#x000A;aws ecs run-task <span class="nt">--cluster</span> <span class="k">${</span><span class="nv">CLUSTER</span><span class="k">}</span> <span class="nt">--task-definition</span> <span class="s2">"</span><span class="k">${</span><span class="nv">TASK_FAMILY</span><span class="k">}</span><span class="s2">:</span><span class="k">${</span><span class="nv">TASK_REVISION</span><span class="k">}</span><span class="s2">"</span> | jq <span class="nb">.</span>&#x000A;</code></pre></div>&#x000A;<h3 id="task-db-migrate-json-erb">task-db-migrate.json.erb</h3>&#x000A;<div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">&#x000A;  </span><span class="nl">"family"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ngs-docker-rails-example-db-migrate-&lt;%= ENV['ENV_NAME'] %&gt;"</span><span class="p">,</span><span class="w">&#x000A;  </span><span class="nl">"containerDefinitions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">&#x000A;    </span><span class="p">{</span><span class="w">&#x000A;      </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;%= ENV['DOCKER_REPO'] %&gt;:job-b&lt;%= ENV['CIRCLE_BUILD_NUM'] %&gt;"</span><span class="p">,</span><span class="w">&#x000A;      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"docker-rails-example-db-migrate"</span><span class="p">,</span><span class="w">&#x000A;      </span><span class="nl">"cpu"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">&#x000A;      </span><span class="nl">"memory"</span><span class="p">:</span><span class="w"> </span><span class="mi">128</span><span class="p">,</span><span class="w">&#x000A;      </span><span class="nl">"essential"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">&#x000A;      </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"./bin/rake"</span><span class="p">,</span><span class="w"> </span><span class="s2">"db:migrate"</span><span class="p">],</span><span class="w">&#x000A;      </span><span class="nl">"mountPoints"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nl">"containerPath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/var/www/app/log"</span><span class="p">,</span><span class="w"> </span><span class="nl">"sourceVolume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"log"</span><span class="p">,</span><span class="w"> </span><span class="nl">"readOnly"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">}],</span><span class="w">&#x000A;      </span><span class="nl">"environment"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">&#x000A;        </span><span class="p">{</span><span class="w"> </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DATABASE_URL"</span><span class="p">,</span><span class="w"> </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;%= ENV['DATABASE_URL'] %&gt;"</span><span class="w"> </span><span class="p">},</span><span class="w">&#x000A;        </span><span class="p">{</span><span class="w"> </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"REDIS_URL"</span><span class="p">,</span><span class="w"> </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;%= ENV['REDIS_URL'] %&gt;"</span><span class="w"> </span><span class="p">}</span><span class="w">&#x000A;      </span><span class="p">],</span><span class="w">&#x000A;      </span><span class="nl">"essential"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">&#x000A;    </span><span class="p">}</span><span class="w">&#x000A;  </span><span class="p">],</span><span class="w">&#x000A;  </span><span class="nl">"volumes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">&#x000A;    </span><span class="p">{</span><span class="w">&#x000A;      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"log"</span><span class="p">,</span><span class="w">&#x000A;      </span><span class="nl">"host"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"sourcePath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/var/log/rails"</span><span class="w"> </span><span class="p">}</span><span class="w">&#x000A;    </span><span class="p">}</span><span class="w">&#x000A;  </span><span class="p">]</span><span class="w">&#x000A;</span><span class="p">}</span><span class="w">&#x000A;</span></code></pre></div>&#x000A;<h3 id="ecs-deploy-services-sh">ecs-deploy-services.sh</h3>&#x000A;&#x000A;<p><code>web</code>, <code>job</code> の常駐プロセスのあるタスクを定義し、サービスを更新、古いタスクを停止します。</p>&#x000A;<div class="highlight"><pre class="highlight shell"><code><span class="c">#!/bin/sh</span>&#x000A;<span class="nb">set</span> <span class="nt">-eu</span>&#x000A;&#x000A;<span class="nv">CLUSTER</span><span class="o">=</span>default&#x000A;<span class="nv">UPPER_ENV_NAME</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nv">$ENV_NAME</span> | <span class="nb">awk</span> <span class="s1">'{print toupper($0)}'</span><span class="si">)</span>&#x000A;<span class="nv">DATABASE_URL</span><span class="o">=</span><span class="si">$(</span><span class="nb">eval</span> <span class="s2">"echo </span><span class="se">\$</span><span class="s2">DATABASE_URL_</span><span class="k">${</span><span class="nv">UPPER_ENV_NAME</span><span class="k">}</span><span class="s2">"</span><span class="si">)</span>&#x000A;<span class="nv">REDIS_URL</span><span class="o">=</span><span class="si">$(</span><span class="nb">eval</span> <span class="s2">"echo </span><span class="se">\$</span><span class="s2">REDIS_URL_</span><span class="k">${</span><span class="nv">UPPER_ENV_NAME</span><span class="k">}</span><span class="s2">"</span><span class="si">)</span>&#x000A;<span class="nv">APP_NAME</span><span class="o">=</span><span class="s1">'ngs-docker-rails-example-'</span>&#x000A;<span class="nv">TASK_FAMILY</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">APP_NAME</span><span class="k">}${</span><span class="nv">ENV_NAME</span><span class="k">}</span><span class="s2">"</span>&#x000A;<span class="nv">SERVICE_NAME</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">APP_NAME</span><span class="k">}</span><span class="s2">service-</span><span class="k">${</span><span class="nv">ENV_NAME</span><span class="k">}</span><span class="s2">"</span>&#x000A;&#x000A;<span class="nv">REDIS_URL</span><span class="o">=</span><span class="nv">$REDIS_URL</span> <span class="nv">DATABASE_URL</span><span class="o">=</span><span class="nv">$DATABASE_URL</span> <span class="se">\</span>&#x000A;  erb ecs-task-definitions/service.json.erb <span class="o">&gt;</span> .ecs-task-definition.json&#x000A;<span class="nv">TASK_DEFINITION_JSON</span><span class="o">=</span><span class="si">$(</span>aws ecs register-task-definition <span class="nt">--family</span> <span class="nv">$TASK_FAMILY</span> <span class="nt">--cli-input-json</span> <span class="s2">"file://</span><span class="si">$(</span><span class="nb">pwd</span><span class="si">)</span><span class="s2">/.ecs-task-definition.json"</span><span class="si">)</span>&#x000A;<span class="nv">TASK_REVISION</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nv">$TASK_DEFINITION_JSON</span> | jq .taskDefinition.revision<span class="si">)</span>&#x000A;<span class="nv">DESIRED_COUNT</span><span class="o">=</span><span class="si">$(</span>aws ecs describe-services <span class="nt">--services</span> <span class="nv">$SERVICE_NAME</span> | jq <span class="s1">'.services[0].desiredCount'</span><span class="si">)</span>&#x000A;&#x000A;<span class="k">if</span> <span class="o">[</span> <span class="k">${</span><span class="nv">DESIRED_COUNT</span><span class="k">}</span> <span class="o">=</span> <span class="s2">"0"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then&#x000A;    </span><span class="nv">DESIRED_COUNT</span><span class="o">=</span><span class="s2">"1"</span>&#x000A;<span class="k">fi&#x000A;&#x000A;</span><span class="nv">SERVICE_JSON</span><span class="o">=</span><span class="si">$(</span>aws ecs update-service <span class="nt">--cluster</span> <span class="k">${</span><span class="nv">CLUSTER</span><span class="k">}</span> <span class="nt">--service</span> <span class="k">${</span><span class="nv">SERVICE_NAME</span><span class="k">}</span> <span class="nt">--task-definition</span> <span class="k">${</span><span class="nv">TASK_FAMILY</span><span class="k">}</span>:<span class="k">${</span><span class="nv">TASK_REVISION</span><span class="k">}</span> <span class="nt">--desired-count</span> <span class="k">${</span><span class="nv">DESIRED_COUNT</span><span class="k">}</span><span class="si">)</span>&#x000A;<span class="nb">echo</span> <span class="nv">$SERVICE_JSON</span> | jq <span class="nb">.</span>&#x000A;&#x000A;<span class="nv">TASK_ARN</span><span class="o">=</span><span class="si">$(</span>aws ecs list-tasks <span class="nt">--cluster</span> <span class="k">${</span><span class="nv">CLUSTER</span><span class="k">}</span> <span class="nt">--service</span> <span class="k">${</span><span class="nv">SERVICE_NAME</span><span class="k">}</span> | jq <span class="nt">-r</span> <span class="s1">'.taskArns[0]'</span><span class="si">)</span>&#x000A;<span class="nv">TASK_JSON</span><span class="o">=</span><span class="si">$(</span>aws ecs stop-task <span class="nt">--task</span> <span class="k">${</span><span class="nv">TASK_ARN</span><span class="k">}</span><span class="si">)</span>&#x000A;<span class="nb">echo</span> <span class="nv">$TASK_JSON</span> | jq <span class="nb">.</span>&#x000A;</code></pre></div>&#x000A;<h3 id="service-json-erb">service.json.erb</h3>&#x000A;<div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">&#x000A;  </span><span class="nl">"family"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ngs-docker-rails-example-&lt;%= ENV['ENV_NAME'] %&gt;"</span><span class="p">,</span><span class="w">&#x000A;  </span><span class="nl">"containerDefinitions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">&#x000A;    </span><span class="p">{</span><span class="w">&#x000A;      </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;%= ENV['DOCKER_REPO'] %&gt;:web-b&lt;%= ENV['CIRCLE_BUILD_NUM'] %&gt;"</span><span class="p">,</span><span class="w">&#x000A;      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"docker-rails-example-web"</span><span class="p">,</span><span class="w">&#x000A;      </span><span class="nl">"cpu"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">&#x000A;      </span><span class="nl">"memory"</span><span class="p">:</span><span class="w"> </span><span class="mi">128</span><span class="p">,</span><span class="w">&#x000A;      </span><span class="nl">"essential"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">&#x000A;      </span><span class="nl">"portMappings"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nl">"hostPort"</span><span class="p">:</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w"> </span><span class="nl">"containerPort"</span><span class="p">:</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w"> </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tcp"</span><span class="w"> </span><span class="p">}],</span><span class="w">&#x000A;      </span><span class="nl">"mountPoints"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nl">"containerPath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/var/www/app/log"</span><span class="p">,</span><span class="w"> </span><span class="nl">"sourceVolume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"log"</span><span class="p">,</span><span class="w"> </span><span class="nl">"readOnly"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">}],</span><span class="w">&#x000A;      </span><span class="nl">"environment"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">&#x000A;        </span><span class="p">{</span><span class="w"> </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DATABASE_URL"</span><span class="p">,</span><span class="w"> </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;%= ENV['DATABASE_URL'] %&gt;"</span><span class="w"> </span><span class="p">},</span><span class="w">&#x000A;        </span><span class="p">{</span><span class="w"> </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"REDIS_URL"</span><span class="p">,</span><span class="w"> </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;%= ENV['REDIS_URL'] %&gt;"</span><span class="w"> </span><span class="p">}</span><span class="w">&#x000A;      </span><span class="p">],</span><span class="w">&#x000A;      </span><span class="nl">"essential"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">&#x000A;    </span><span class="p">},</span><span class="w">&#x000A;    </span><span class="p">{</span><span class="w">&#x000A;      </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;%= ENV['DOCKER_REPO'] %&gt;:job-b&lt;%= ENV['CIRCLE_BUILD_NUM'] %&gt;"</span><span class="p">,</span><span class="w">&#x000A;      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"docker-rails-example-job"</span><span class="p">,</span><span class="w">&#x000A;      </span><span class="nl">"cpu"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">&#x000A;      </span><span class="nl">"memory"</span><span class="p">:</span><span class="w"> </span><span class="mi">128</span><span class="p">,</span><span class="w">&#x000A;      </span><span class="nl">"essential"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">&#x000A;      </span><span class="nl">"mountPoints"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nl">"containerPath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/var/www/app/log"</span><span class="p">,</span><span class="w"> </span><span class="nl">"sourceVolume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"log"</span><span class="p">,</span><span class="w"> </span><span class="nl">"readOnly"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">}],</span><span class="w">&#x000A;      </span><span class="nl">"environment"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">&#x000A;        </span><span class="p">{</span><span class="w"> </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DATABASE_URL"</span><span class="p">,</span><span class="w"> </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;%= ENV['DATABASE_URL'] %&gt;"</span><span class="w"> </span><span class="p">},</span><span class="w">&#x000A;        </span><span class="p">{</span><span class="w"> </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"REDIS_URL"</span><span class="p">,</span><span class="w"> </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;%= ENV['REDIS_URL'] %&gt;"</span><span class="w"> </span><span class="p">}</span><span class="w">&#x000A;      </span><span class="p">],</span><span class="w">&#x000A;      </span><span class="nl">"essential"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">&#x000A;    </span><span class="p">}</span><span class="w">&#x000A;  </span><span class="p">],</span><span class="w">&#x000A;  </span><span class="nl">"volumes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">&#x000A;    </span><span class="p">{</span><span class="w">&#x000A;      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"log"</span><span class="p">,</span><span class="w">&#x000A;      </span><span class="nl">"host"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"sourcePath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/var/log/rails"</span><span class="w"> </span><span class="p">}</span><span class="w">&#x000A;    </span><span class="p">}</span><span class="w">&#x000A;  </span><span class="p">]</span><span class="w">&#x000A;</span><span class="p">}</span><span class="w">&#x000A;</span></code></pre></div>&#x000A;<h2 id="wip">WIP</h2>&#x000A;&#x000A;<p>今回記載した内容では、タスクの切り替え時にダウンタイムが発生してしまうので、以下の記事などを参考に、無停止デプロイの設定をしたいと思います。</p>&#x000A;&#x000A;<ul>&#x000A;<li><a href="http://stormcat.hatenablog.com/entry/2015/07/22/130000">EC2 Container Service (ECS) を管理して、Blue-Green Deploymentを実現するツールを書いた</a>&#x000A;</li></ul></div><footer class="meta"><ul class="pull-left nav nav-pills tags" itemprop="keywords"><li><a href="/t/aws/"><span class="far fa-tag"></span>&nbsp;aws</a></li><li><a href="/t/ecs/"><span class="far fa-tag"></span>&nbsp;ecs</a></li><li><a href="/t/rails/"><span class="far fa-tag"></span>&nbsp;rails</a></li><li><a href="/t/docker/"><span class="far fa-tag"></span>&nbsp;docker</a></li><li><a href="/t/infrastructure/"><span class="far fa-tag"></span>&nbsp;infrastructure</a></li><li><a href="/t/circleci/"><span class="far fa-tag"></span>&nbsp;circleci</a></li><li><a href="/t/serverspec/"><span class="far fa-tag"></span>&nbsp;serverspec</a></li></ul><ul class="nav nav-pills pull-right"><li class="author pull-right"><a href="/about" itemprop="author" itemtype="http://schema.org/Person" itemscope="true"><span itemprop="name">長瀬 敦史</span></a></li><li><a href="https://github.com/ngs/sources.ngs.io/blob/master/source/ja/2015-09-14-ecs-docker-rails.html.md" title="View on GitHub" rel="nofollow" data-toggle="tooltip" data-container="footer.meta" data-placement="left"><span class="fab fa-github-alt">&nbsp;</span></a></li><li><a href="/2015/09/14/ecs-docker-rails/" title="Permalink" data-toggle="tooltip" data-container="footer.meta" data-placement="left" itemprop="mainEntityOfPage"><span class="far fa-link">&nbsp;</span></a></li></ul><div class="social-buttons clearfix"><a href="https://twitter.com/share" class="twitter-share-button" data-url="https://ja.ngs.io/2015/09/14/ecs-docker-rails/" data-via="ngs" data-counturl="https://ja.ngs.io/2015/09/14/ecs-docker-rails/" rel="nofollow" data-text="Rails アプリの Docker Image ビルドと Amazon EC2 Container Service へのデプロイの自動化">つぶやく</a><div class="hateb"><a class="hatena-bookmark-button" data-hatena-bookmark-layout="simple-balloon" data-hatena-bookmark-title="Rails アプリの Docker Image ビルドと Amazon EC2 Container Service へのデプロイの自動化" href="http://b.hatena.ne.jp/entry/s/ja.ngs.io/2015/09/14/ecs-docker-rails/" title="このエントリーをはてなブックマークに追加"><img alt="このエントリーをはてなブックマークに追加" height="20" src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" style="border: none;" width="20" /></a></div><div class="fb-like" data-href="https://ja.ngs.io/2015/09/14/ecs-docker-rails/" data-send="true" data-show-faces="false" data-width="300"></div><script src="//platform.linkedin.com/in.js" type="text/javascript">lang: ja_JP</script><script data-counter="right" data-url="https://ja.ngs.io/2015/09/14/ecs-docker-rails/" type="IN/Share"></script></div><ul class="pager"><li class="previous"><a href="/2015/08/01/hello-oneteam/" data-toggle="tooltip" title="前の記事: Hello, Oneteam" rel="prev"><span class="far fa-chevron-left"></span></a></li><li class="next"><a href="/2015/09/26/circleci-docker-serverspec/" data-toggle="tooltip" title="次の記事: CircleCI で Docker Container を Serverspec でテストする" rel="next"><span class="far fa-chevron-right"></span></a></li></ul></footer><div class="disqus"><div id='disqus_thread'></div>
<script type='text/javascript'>
//<![CDATA[
                  var disqus_shortname = 'jangsio';
          
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
//]]>
</script>
<noscript>Please enable JavaScript to view the <a href='http://disqus.com/?ref_noscript'>comments powered by Disqus.</a></noscript>
<a href='http://disqus.com' class='dsq-brlink'>comments powered by <span class='logo-disqus'>Disqus</span></a>
</div><div id="similar-articles"><h2>類似記事</h2><ol class="entries"><li><a href="/2015/09/26/circleci-docker-serverspec/"><time>2015/09/26</time><span class="title">CircleCI で Docker Container を Serverspec でテストする</span></a></li><li><a href="/2016/02/11/how-oneteam-deliver/"><time>2016/02/11</time><span class="title">Oneteam アプリのビルド + 配信自動化 #meguroes</span></a></li><li><a href="/2015/10/01/heroku-docker-nginx/"><time>2015/10/01</time><span class="title">nginx Container for Heroku Docker</span></a></li><li><a href="/2016/03/04/swift-webapp-on-ecs/"><time>2016/03/04</time><span class="title">Swift で開発した Web アプリケーションを Amazon EC2 Container Services (ECS) にデプロイする</span></a></li><li><a href="/2015/03/24/circleci-ios/"><time>2015/03/24</time><span class="title">iOS アプリの継続ビルドを CircleCI に変更した</span></a></li></ol></div></article><div id="fb-root"></div><script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/ja_JP/all.js#appId=250606621791116&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script><script async="async" charset="utf-8" src="https://b.st-hatena.com/js/bookmark_button.js" type="text/javascript"></script><script>(function(){
  var twitterWidgets = document.createElement('script');
  twitterWidgets.type = 'text/javascript';
  twitterWidgets.async = true;
  twitterWidgets.src = 'https://platform.twitter.com/widgets.js';
  document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
})();</script></main><aside class="col-md-3"><section id="sidebar-navigation"><h2>ナビゲーション</h2><ol class="nav" itemscope="itemscope" itemtype="http://www.schema.org/SiteNavigationElement"><li><a href="/" itemprop="url"><span class="far fa-home"></span>&nbsp;&nbsp;<span itemprop="name">ホーム</span></a></li><li><a href="/about" rel="author" itemprop="url"><span class="far fa-id-card"></span>&nbsp;&nbsp;<span itemprop="name">自己紹介</span></a></li><li><a href="https://ngs.io/" rel="alternate" itemprop="url" hreflang="en"><span class="far fa-pencil"></span>&nbsp;&nbsp;<span itemprop="name">Blog (English)</span></a></li></ol></section><section id="sidebar-search"><form action="/search/" class="form-inline" id="site-search-form" itemprop="potentialAction" itemscope="itemscope" itemtype="http://schema.org/SearchAction" method="get" role="form"><div class="form-group has-feedback"><input accesskey="s" class="form-control" id="site-search-input" itemprop="query-input" name="q" placeholder="記事を検索" required="required" type="search" /><span class="far fa-search form-control-feedback"></span><meta content="https://ja.ngs.io/search/?q={q}" itemprop="target" /></div></form></section><section id="sidebar-bootswatch" style="display:none"><h2>Theme</h2><div class="btn-group"><button class="btn btn-default dropdown-toggle" data-toggle="dropdown" type="button"><span class="bootswatch-theme-name"></span>&nbsp;<span class="caret"></span></button><ul class="dropdown-menu bootswatch-theme-list" role="menu"><li style="padding: 1em 0; text-align: center"><i class="fas fa-sync fa-spin"></i></li></ul></div></section><section id="sidebar-links"><header><h2>リンク</h2></header><ol class="nav"><li><a href="https://twitter.com/ngs"><i class="fab fa-twitter"></i>&nbsp;&nbsp;Twitter</a></li><li><a href="https://github.com/ngs"><i class="fab fa-github"></i>&nbsp;&nbsp;GitHub</a></li><li><a href="https://dribbble.com/ngs"><i class="fab fa-dribbble"></i>&nbsp;&nbsp;Dribbble</a></li><li><a href="https://keybase.io/ngs"><i class="fab fa-keybase"></i>&nbsp;&nbsp;Keybase</a></li><li><a href="https://pinterest.com/ngs/"><i class="fab fa-pinterest"></i>&nbsp;&nbsp;Pinterest</a></li><li><a href="https://plus.google.com/+AtsushiNAGASE?rel=author" rel="publisher"><i class="fab fa-google-plus"></i>&nbsp;&nbsp;Google</a></li><li><a href="https://b.ngs.io"><i class="far fa-bookmark"></i>&nbsp;&nbsp;Bookmarks</a></li><li><a href="https://www.paypal.me/atsnngs"><i class="fab fa-paypal"></i>&nbsp;&nbsp;PayPal.me</a></li></ol></section><section id="sidebar-recent"><header><h2>最近の記事</h2></header><ol class="nav"><li><a href="/2020/06/17/scrapmd/"><span class="title">Scrapmd - Markdown で保存する、ウェブページ・スクラップブック</span><time>2020/06/17</time></a></li><li><a href="/2020/05/29/radiko-podcast/"><span class="title">radiko の放送を AWS S3 に定時録音し Podcast として聞く</span><time>2020/05/29</time></a></li><li><a href="/2020/05/15/ci2go-maccatalyst/"><span class="title">CI2Go for macOS をリリースしました</span><time>2020/05/15</time></a></li><li><a href="/2019/12/31/shokan2019/"><span class="title">2019年所感</span><time>2019/12/31</time></a></li><li><a href="/2019/11/02/electron-vsto/"><span class="title">Electron で Excel Desktop を拡張した舞台裏 #hcmpl</span><time>2019/11/02</time></a></li><li><a href="/2019/11/01/ins0-fudomae/"><span class="title">インスタンスゼロの拠点を開設しました</span><time>2019/11/01</time></a></li><li><a href="/2019/02/12/modelmap/"><span class="title">Modelmap</span><time>2019/02/12</time></a></li><li><a href="/2019/02/08/go-release-action/"><span class="title">Go Release Binary GitHub Action</span><time>2019/02/08</time></a></li><li><a href="/2019/02/07/aws1pif/"><span class="title">AWS の credentials.csv を 1Password に取り込む CLI ツール</span><time>2019/02/07</time></a></li><li><a href="/2019/02/02/hopon/"><span class="title">Hop-on! みなとみらいで電動キックボード試乗</span><time>2019/02/02</time></a></li><li class="show-all text-right"><a href="/archives">全て表示&nbsp;&nbsp;<span class="far fa-arrow-circle-right"></span></a></li></ol></section><section id="sidebar-monthly"><header><h2>月別</h2></header><ol class="nav"><li><a href="/2020/06/">2020年06月<span class="badge pull-right">1</span></a></li><li><a href="/2020/05/">2020年05月<span class="badge pull-right">2</span></a></li><li><a href="/2019/12/">2019年12月<span class="badge pull-right">1</span></a></li><li><a href="/2019/11/">2019年11月<span class="badge pull-right">2</span></a></li><li><a href="/2019/02/">2019年02月<span class="badge pull-right">5</span></a></li><li><a href="/2019/01/">2019年01月<span class="badge pull-right">1</span></a></li><li><a href="/2018/12/">2018年12月<span class="badge pull-right">2</span></a></li><li><a href="/2018/07/">2018年07月<span class="badge pull-right">3</span></a></li><li><a href="/2018/02/">2018年02月<span class="badge pull-right">1</span></a></li><li><a href="/2018/01/">2018年01月<span class="badge pull-right">1</span></a></li><li><a href="/2017/09/">2017年09月<span class="badge pull-right">1</span></a></li><li><a href="/2017/04/">2017年04月<span class="badge pull-right">1</span></a></li><li><a href="/2017/03/">2017年03月<span class="badge pull-right">1</span></a></li><li><a href="/2016/12/">2016年12月<span class="badge pull-right">2</span></a></li><li><a href="/2016/09/">2016年09月<span class="badge pull-right">2</span></a></li><li><a href="/2016/07/">2016年07月<span class="badge pull-right">1</span></a></li><li><a href="/2016/06/">2016年06月<span class="badge pull-right">7</span></a></li><li><a href="/2016/05/">2016年05月<span class="badge pull-right">1</span></a></li><li><a href="/2016/04/">2016年04月<span class="badge pull-right">3</span></a></li><li><a href="/2016/03/">2016年03月<span class="badge pull-right">3</span></a></li><li><a href="/2016/02/">2016年02月<span class="badge pull-right">2</span></a></li><li><a href="/2016/01/">2016年01月<span class="badge pull-right">1</span></a></li><li><a href="/2015/12/">2015年12月<span class="badge pull-right">3</span></a></li><li><a href="/2015/10/">2015年10月<span class="badge pull-right">1</span></a></li><li><a href="/2015/09/">2015年09月<span class="badge pull-right">2</span></a></li><li><a href="/2015/08/">2015年08月<span class="badge pull-right">1</span></a></li><li><a href="/2015/06/">2015年06月<span class="badge pull-right">2</span></a></li><li><a href="/2015/04/">2015年04月<span class="badge pull-right">3</span></a></li><li><a href="/2015/03/">2015年03月<span class="badge pull-right">4</span></a></li><li><a href="/2015/02/">2015年02月<span class="badge pull-right">1</span></a></li><li><a href="/2015/01/">2015年01月<span class="badge pull-right">2</span></a></li><li><a href="/2014/12/">2014年12月<span class="badge pull-right">6</span></a></li><li><a href="/2014/11/">2014年11月<span class="badge pull-right">3</span></a></li><li><a href="/2014/10/">2014年10月<span class="badge pull-right">4</span></a></li><li><a href="/2014/09/">2014年09月<span class="badge pull-right">2</span></a></li><li><a href="/2014/08/">2014年08月<span class="badge pull-right">9</span></a></li><li><a href="/2014/07/">2014年07月<span class="badge pull-right">2</span></a></li><li><a href="/2014/06/">2014年06月<span class="badge pull-right">7</span></a></li><li><a href="/2014/05/">2014年05月<span class="badge pull-right">12</span></a></li><li><a href="/2014/04/">2014年04月<span class="badge pull-right">5</span></a></li><li><a href="/2014/02/">2014年02月<span class="badge pull-right">2</span></a></li><li><a href="/2013/12/">2013年12月<span class="badge pull-right">10</span></a></li><li><a href="/2013/10/">2013年10月<span class="badge pull-right">1</span></a></li><li><a href="/2013/02/">2013年02月<span class="badge pull-right">2</span></a></li><li><a href="/2013/01/">2013年01月<span class="badge pull-right">1</span></a></li><li><a href="/2012/12/">2012年12月<span class="badge pull-right">1</span></a></li><li><a href="/2012/11/">2012年11月<span class="badge pull-right">1</span></a></li><li><a href="/2012/07/">2012年07月<span class="badge pull-right">1</span></a></li><li><a href="/2012/05/">2012年05月<span class="badge pull-right">3</span></a></li><li><a href="/2012/01/">2012年01月<span class="badge pull-right">1</span></a></li><li><a href="/2011/02/">2011年02月<span class="badge pull-right">5</span></a></li><li><a href="/2011/01/">2011年01月<span class="badge pull-right">2</span></a></li><li><a href="/2009/12/">2009年12月<span class="badge pull-right">1</span></a></li><li><a href="/2009/11/">2009年11月<span class="badge pull-right">1</span></a></li><li><a href="/2009/09/">2009年09月<span class="badge pull-right">1</span></a></li><li><a href="/2009/08/">2009年08月<span class="badge pull-right">1</span></a></li><li><a href="/2009/07/">2009年07月<span class="badge pull-right">2</span></a></li><li><a href="/2009/03/">2009年03月<span class="badge pull-right">1</span></a></li><li><a href="/2009/01/">2009年01月<span class="badge pull-right">3</span></a></li><li><a href="/2008/04/">2008年04月<span class="badge pull-right">1</span></a></li><li><a href="/2008/03/">2008年03月<span class="badge pull-right">1</span></a></li><li><a href="/2008/01/">2008年01月<span class="badge pull-right">1</span></a></li><li><a href="/2007/09/">2007年09月<span class="badge pull-right">1</span></a></li><li><a href="/2007/08/">2007年08月<span class="badge pull-right">1</span></a></li></ol></section><section id="sidebar-tags"><header><h2>タグ</h2><form class="form-inline" id="tag-filter-form" role="form"><div class="form-group has-feedback"><input class="form-control" id="tag-filter-input" placeholder="タグを絞り込む" type="search" /><span class="far fa-search form-control-feedback"></span></div></form></header><ol class="nav collapse in" id="sidebar-tags-list"><li class="hidden"><a href="/t/accident/"><span class="far fa-tag"></span>&nbsp;accident<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/actions/"><span class="far fa-tag"></span>&nbsp;actions<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/actionscript/"><span class="far fa-tag"></span>&nbsp;actionscript<span class="badge pull-right">3</span></a></li><li class="hidden"><a href="/t/adobeair/"><span class="far fa-tag"></span>&nbsp;adobeair<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/afnetworking/"><span class="far fa-tag"></span>&nbsp;afnetworking<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/amazon/"><span class="far fa-tag"></span>&nbsp;amazon<span class="badge pull-right">5</span></a></li><li class="hidden"><a href="/t/android/"><span class="far fa-tag"></span>&nbsp;android<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/angularjs/"><span class="far fa-tag"></span>&nbsp;angularjs<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/announce/"><span class="far fa-tag"></span>&nbsp;announce<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/api/"><span class="far fa-tag"></span>&nbsp;api<span class="badge pull-right">6</span></a></li><li class="hidden"><a href="/t/apn/"><span class="far fa-tag"></span>&nbsp;apn<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/app/"><span class="far fa-tag"></span>&nbsp;app<span class="badge pull-right">5</span></a></li><li class="hidden"><a href="/t/apple/"><span class="far fa-tag"></span>&nbsp;apple<span class="badge pull-right">6</span></a></li><li class="hidden"><a href="/t/apple-watch/"><span class="far fa-tag"></span>&nbsp;apple watch<span class="badge pull-right">3</span></a></li><li class="hidden"><a href="/t/arduino/"><span class="far fa-tag"></span>&nbsp;arduino<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/asdoc/"><span class="far fa-tag"></span>&nbsp;asdoc<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/audio/"><span class="far fa-tag"></span>&nbsp;audio<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/automation/"><span class="far fa-tag"></span>&nbsp;automation<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/aws/"><span class="far fa-tag"></span>&nbsp;aws<span class="badge pull-right">7</span></a></li><li class="hidden"><a href="/t/backup/"><span class="far fa-tag"></span>&nbsp;backup<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/bicycle/"><span class="far fa-tag"></span>&nbsp;bicycle<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/blog/"><span class="far fa-tag"></span>&nbsp;blog<span class="badge pull-right">5</span></a></li><li class="hidden"><a href="/t/bluetooth/"><span class="far fa-tag"></span>&nbsp;bluetooth<span class="badge pull-right">3</span></a></li><li class="hidden"><a href="/t/body-and-soul/"><span class="far fa-tag"></span>&nbsp;body and soul<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/book/"><span class="far fa-tag"></span>&nbsp;book<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/bootstrap/"><span class="far fa-tag"></span>&nbsp;bootstrap<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/bot/"><span class="far fa-tag"></span>&nbsp;bot<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/boxen/"><span class="far fa-tag"></span>&nbsp;boxen<span class="badge pull-right">4</span></a></li><li class="hidden"><a href="/t/brewproj/"><span class="far fa-tag"></span>&nbsp;brewproj<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/brick-pi/"><span class="far fa-tag"></span>&nbsp;brick pi<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/browserstack/"><span class="far fa-tag"></span>&nbsp;browserstack<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/camp/"><span class="far fa-tag"></span>&nbsp;camp<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/campfire/"><span class="far fa-tag"></span>&nbsp;campfire<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/capistrano/"><span class="far fa-tag"></span>&nbsp;capistrano<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/career/"><span class="far fa-tag"></span>&nbsp;career<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/centos/"><span class="far fa-tag"></span>&nbsp;centos<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/charset/"><span class="far fa-tag"></span>&nbsp;charset<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/chat/"><span class="far fa-tag"></span>&nbsp;chat<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/chatbot/"><span class="far fa-tag"></span>&nbsp;chatbot<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/chatops/"><span class="far fa-tag"></span>&nbsp;chatops<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/child/"><span class="far fa-tag"></span>&nbsp;child<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/chrome/"><span class="far fa-tag"></span>&nbsp;chrome<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/ci/"><span class="far fa-tag"></span>&nbsp;ci<span class="badge pull-right">9</span></a></li><li class="hidden"><a href="/t/ci2go/"><span class="far fa-tag"></span>&nbsp;ci2go<span class="badge pull-right">10</span></a></li><li class="hidden"><a href="/t/circleci/"><span class="far fa-tag"></span>&nbsp;circleci<span class="badge pull-right">17</span></a></li><li class="hidden"><a href="/t/cli/"><span class="far fa-tag"></span>&nbsp;cli<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/cloudfront/"><span class="far fa-tag"></span>&nbsp;cloudfront<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/coccoa/"><span class="far fa-tag"></span>&nbsp;coccoa<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/cocoa/"><span class="far fa-tag"></span>&nbsp;cocoa<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/cocoapods/"><span class="far fa-tag"></span>&nbsp;cocoapods<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/cocoon/"><span class="far fa-tag"></span>&nbsp;cocoon<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/coda2/"><span class="far fa-tag"></span>&nbsp;coda2<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/coffeelint/"><span class="far fa-tag"></span>&nbsp;coffeelint<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/coffeescript/"><span class="far fa-tag"></span>&nbsp;coffeescript<span class="badge pull-right">3</span></a></li><li class="hidden"><a href="/t/color/"><span class="far fa-tag"></span>&nbsp;color<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/conference/"><span class="far fa-tag"></span>&nbsp;conference<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/coveralls/"><span class="far fa-tag"></span>&nbsp;coveralls<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/cpan/"><span class="far fa-tag"></span>&nbsp;cpan<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/cron/"><span class="far fa-tag"></span>&nbsp;cron<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/curl/"><span class="far fa-tag"></span>&nbsp;curl<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/cycling/"><span class="far fa-tag"></span>&nbsp;cycling<span class="badge pull-right">4</span></a></li><li class="hidden"><a href="/t/dbix-class/"><span class="far fa-tag"></span>&nbsp;dbix::class<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/deployment/"><span class="far fa-tag"></span>&nbsp;deployment<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/developer-productivity/"><span class="far fa-tag"></span>&nbsp;developer productivity<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/diy/"><span class="far fa-tag"></span>&nbsp;diy<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/dj/"><span class="far fa-tag"></span>&nbsp;dj<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/docker/"><span class="far fa-tag"></span>&nbsp;docker<span class="badge pull-right">6</span></a></li><li class="hidden"><a href="/t/dotfiles/"><span class="far fa-tag"></span>&nbsp;dotfiles<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/dreamhost/"><span class="far fa-tag"></span>&nbsp;dreamhost<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/e2e/"><span class="far fa-tag"></span>&nbsp;e2e<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/ecs/"><span class="far fa-tag"></span>&nbsp;ecs<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/edifier/"><span class="far fa-tag"></span>&nbsp;edifier<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/editor/"><span class="far fa-tag"></span>&nbsp;editor<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/electron/"><span class="far fa-tag"></span>&nbsp;electron<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/electronic-components/"><span class="far fa-tag"></span>&nbsp;electronic components<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/email/"><span class="far fa-tag"></span>&nbsp;email<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/emoji/"><span class="far fa-tag"></span>&nbsp;emoji<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/encryption/"><span class="far fa-tag"></span>&nbsp;encryption<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/event/"><span class="far fa-tag"></span>&nbsp;event<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/everdesktop/"><span class="far fa-tag"></span>&nbsp;everdesktop<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/evernote/"><span class="far fa-tag"></span>&nbsp;evernote<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/express/"><span class="far fa-tag"></span>&nbsp;express<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/extension/"><span class="far fa-tag"></span>&nbsp;extension<span class="badge pull-right">3</span></a></li><li class="hidden"><a href="/t/facebook/"><span class="far fa-tag"></span>&nbsp;facebook<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/family/"><span class="far fa-tag"></span>&nbsp;family<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/fastlane/"><span class="far fa-tag"></span>&nbsp;fastlane<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/festival/"><span class="far fa-tag"></span>&nbsp;festival<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/fishing/"><span class="far fa-tag"></span>&nbsp;fishing<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/flash/"><span class="far fa-tag"></span>&nbsp;flash<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/font/"><span class="far fa-tag"></span>&nbsp;font<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/fortis/"><span class="far fa-tag"></span>&nbsp;fortis<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/gadget/"><span class="far fa-tag"></span>&nbsp;gadget<span class="badge pull-right">5</span></a></li><li class="hidden"><a href="/t/game/"><span class="far fa-tag"></span>&nbsp;game<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/garmin/"><span class="far fa-tag"></span>&nbsp;garmin<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/gdd/"><span class="far fa-tag"></span>&nbsp;gdd<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/gist/"><span class="far fa-tag"></span>&nbsp;gist<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/git/"><span class="far fa-tag"></span>&nbsp;git<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/github/"><span class="far fa-tag"></span>&nbsp;github<span class="badge pull-right">13</span></a></li><li class="hidden"><a href="/t/go/"><span class="far fa-tag"></span>&nbsp;go<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/golang/"><span class="far fa-tag"></span>&nbsp;golang<span class="badge pull-right">3</span></a></li><li class="hidden"><a href="/t/google/"><span class="far fa-tag"></span>&nbsp;google<span class="badge pull-right">3</span></a></li><li class="hidden"><a href="/t/google-analytics/"><span class="far fa-tag"></span>&nbsp;google analytics<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/google-app-script/"><span class="far fa-tag"></span>&nbsp;google app script<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/gulp/"><span class="far fa-tag"></span>&nbsp;gulp<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/hackathon/"><span class="far fa-tag"></span>&nbsp;hackathon<span class="badge pull-right">6</span></a></li><li class="hidden"><a href="/t/hatena/"><span class="far fa-tag"></span>&nbsp;hatena<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/headphone-amp/"><span class="far fa-tag"></span>&nbsp;headphone amp<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/heroku/"><span class="far fa-tag"></span>&nbsp;heroku<span class="badge pull-right">4</span></a></li><li class="hidden"><a href="/t/hipchat/"><span class="far fa-tag"></span>&nbsp;hipchat<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/homebrew/"><span class="far fa-tag"></span>&nbsp;homebrew<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/hopon/"><span class="far fa-tag"></span>&nbsp;hopon<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/hosting/"><span class="far fa-tag"></span>&nbsp;hosting<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/hotpepper/"><span class="far fa-tag"></span>&nbsp;hotpepper<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/house/"><span class="far fa-tag"></span>&nbsp;house<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/hubot/"><span class="far fa-tag"></span>&nbsp;hubot<span class="badge pull-right">17</span></a></li><li class="hidden"><a href="/t/i18n/"><span class="far fa-tag"></span>&nbsp;i18n<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/ibm/"><span class="far fa-tag"></span>&nbsp;ibm<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/icon/"><span class="far fa-tag"></span>&nbsp;icon<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/infrastructure/"><span class="far fa-tag"></span>&nbsp;infrastructure<span class="badge pull-right">4</span></a></li><li class="hidden"><a href="/t/instance0/"><span class="far fa-tag"></span>&nbsp;instance0<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/ios/"><span class="far fa-tag"></span>&nbsp;ios<span class="badge pull-right">22</span></a></li><li class="hidden"><a href="/t/ipad/"><span class="far fa-tag"></span>&nbsp;ipad<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/iphone/"><span class="far fa-tag"></span>&nbsp;iphone<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/irkit/"><span class="far fa-tag"></span>&nbsp;irkit<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/iterm2/"><span class="far fa-tag"></span>&nbsp;iterm2<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/java/"><span class="far fa-tag"></span>&nbsp;java<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/javascript/"><span class="far fa-tag"></span>&nbsp;javascript<span class="badge pull-right">12</span></a></li><li class="hidden"><a href="/t/jira/"><span class="far fa-tag"></span>&nbsp;jira<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/jiufen/"><span class="far fa-tag"></span>&nbsp;jiufen<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/jquery/"><span class="far fa-tag"></span>&nbsp;jquery<span class="badge pull-right">4</span></a></li><li class="hidden"><a href="/t/json/"><span class="far fa-tag"></span>&nbsp;json<span class="badge pull-right">3</span></a></li><li class="hidden"><a href="/t/jui/"><span class="far fa-tag"></span>&nbsp;jui<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/kaizenplatform/"><span class="far fa-tag"></span>&nbsp;kaizenplatform<span class="badge pull-right">8</span></a></li><li class="hidden"><a href="/t/keybase/"><span class="far fa-tag"></span>&nbsp;keybase<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/keyremap4macbook/"><span class="far fa-tag"></span>&nbsp;keyremap4macbook<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/kindle/"><span class="far fa-tag"></span>&nbsp;kindle<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/kitsura/"><span class="far fa-tag"></span>&nbsp;kitsura<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/lego/"><span class="far fa-tag"></span>&nbsp;lego<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/levenshtein/"><span class="far fa-tag"></span>&nbsp;levenshtein<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/lilypad/"><span class="far fa-tag"></span>&nbsp;lilypad<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/line/"><span class="far fa-tag"></span>&nbsp;line<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/littleapps/"><span class="far fa-tag"></span>&nbsp;littleapps<span class="badge pull-right">3</span></a></li><li class="hidden"><a href="/t/livecycling/"><span class="far fa-tag"></span>&nbsp;livecycling<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/lldb/"><span class="far fa-tag"></span>&nbsp;lldb<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/lt/"><span class="far fa-tag"></span>&nbsp;lt<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/mac/"><span class="far fa-tag"></span>&nbsp;mac<span class="badge pull-right">3</span></a></li><li class="hidden"><a href="/t/maccatalyst/"><span class="far fa-tag"></span>&nbsp;maccatalyst<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/macos/"><span class="far fa-tag"></span>&nbsp;macos<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/macosx/"><span class="far fa-tag"></span>&nbsp;macosx<span class="badge pull-right">3</span></a></li><li class="hidden"><a href="/t/macpro/"><span class="far fa-tag"></span>&nbsp;macpro<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/make/"><span class="far fa-tag"></span>&nbsp;make<span class="badge pull-right">6</span></a></li><li class="hidden"><a href="/t/maker-faire/"><span class="far fa-tag"></span>&nbsp;maker faire<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/mandrill/"><span class="far fa-tag"></span>&nbsp;mandrill<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/markdown/"><span class="far fa-tag"></span>&nbsp;markdown<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/marverics/"><span class="far fa-tag"></span>&nbsp;marverics<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/meetup/"><span class="far fa-tag"></span>&nbsp;meetup<span class="badge pull-right">9</span></a></li><li class="hidden"><a href="/t/meguro/"><span class="far fa-tag"></span>&nbsp;meguro<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/meguro-es/"><span class="far fa-tag"></span>&nbsp;meguro.es<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/middleman/"><span class="far fa-tag"></span>&nbsp;middleman<span class="badge pull-right">13</span></a></li><li class="hidden"><a href="/t/mindstorms/"><span class="far fa-tag"></span>&nbsp;mindstorms<span class="badge pull-right">3</span></a></li><li class="hidden"><a href="/t/mix/"><span class="far fa-tag"></span>&nbsp;mix<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/mocha/"><span class="far fa-tag"></span>&nbsp;mocha<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/modelmap/"><span class="far fa-tag"></span>&nbsp;modelmap<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/moonphase/"><span class="far fa-tag"></span>&nbsp;moonphase<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/mtl/"><span class="far fa-tag"></span>&nbsp;mtl<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/music/"><span class="far fa-tag"></span>&nbsp;music<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/mysql/"><span class="far fa-tag"></span>&nbsp;mysql<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/nginx/"><span class="far fa-tag"></span>&nbsp;nginx<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/nightwatch/"><span class="far fa-tag"></span>&nbsp;nightwatch<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/node-js/"><span class="far fa-tag"></span>&nbsp;node.js<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/nodejs/"><span class="far fa-tag"></span>&nbsp;nodejs<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/nomos/"><span class="far fa-tag"></span>&nbsp;nomos<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/notifications/"><span class="far fa-tag"></span>&nbsp;notifications<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/npm/"><span class="far fa-tag"></span>&nbsp;npm<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/objective-c/"><span class="far fa-tag"></span>&nbsp;objective-c<span class="badge pull-right">5</span></a></li><li class="hidden"><a href="/t/office/"><span class="far fa-tag"></span>&nbsp;office<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/ohmyzsh/"><span class="far fa-tag"></span>&nbsp;ohmyzsh<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/okinawa/"><span class="far fa-tag"></span>&nbsp;okinawa<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/onairlog/"><span class="far fa-tag"></span>&nbsp;onairlog<span class="badge pull-right">5</span></a></li><li class="hidden"><a href="/t/oneteam/"><span class="far fa-tag"></span>&nbsp;oneteam<span class="badge pull-right">4</span></a></li><li class="hidden"><a href="/t/opengraph/"><span class="far fa-tag"></span>&nbsp;opengraph<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/opensocial/"><span class="far fa-tag"></span>&nbsp;opensocial<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/orb/"><span class="far fa-tag"></span>&nbsp;orb<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/osx/"><span class="far fa-tag"></span>&nbsp;osx<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/party/"><span class="far fa-tag"></span>&nbsp;party<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/perl/"><span class="far fa-tag"></span>&nbsp;perl<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/pgp/"><span class="far fa-tag"></span>&nbsp;pgp<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/picture/"><span class="far fa-tag"></span>&nbsp;picture<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/planbcd/"><span class="far fa-tag"></span>&nbsp;planbcd<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/playground/"><span class="far fa-tag"></span>&nbsp;playground<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/playgrounds/"><span class="far fa-tag"></span>&nbsp;playgrounds<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/plug-in/"><span class="far fa-tag"></span>&nbsp;plug-in<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/plugin/"><span class="far fa-tag"></span>&nbsp;plugin<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/posterous/"><span class="far fa-tag"></span>&nbsp;posterous<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/preview/"><span class="far fa-tag"></span>&nbsp;preview<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/project-management/"><span class="far fa-tag"></span>&nbsp;project management<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/pull-request/"><span class="far fa-tag"></span>&nbsp;pull request<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/pusher/"><span class="far fa-tag"></span>&nbsp;pusher<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/python/"><span class="far fa-tag"></span>&nbsp;python<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/qiita/"><span class="far fa-tag"></span>&nbsp;qiita<span class="badge pull-right">3</span></a></li><li class="hidden"><a href="/t/radiko/"><span class="far fa-tag"></span>&nbsp;radiko<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/radio/"><span class="far fa-tag"></span>&nbsp;radio<span class="badge pull-right">3</span></a></li><li class="hidden"><a href="/t/rails/"><span class="far fa-tag"></span>&nbsp;rails<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/raspberry-pi/"><span class="far fa-tag"></span>&nbsp;raspberry pi<span class="badge pull-right">4</span></a></li><li class="hidden"><a href="/t/rdoc/"><span class="far fa-tag"></span>&nbsp;rdoc<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/react-js/"><span class="far fa-tag"></span>&nbsp;react.js<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/realm/"><span class="far fa-tag"></span>&nbsp;realm<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/recruit/"><span class="far fa-tag"></span>&nbsp;recruit<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/release/"><span class="far fa-tag"></span>&nbsp;release<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/requestbin/"><span class="far fa-tag"></span>&nbsp;requestbin<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/robot/"><span class="far fa-tag"></span>&nbsp;robot<span class="badge pull-right">3</span></a></li><li class="hidden"><a href="/t/romo/"><span class="far fa-tag"></span>&nbsp;romo<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/roomba/"><span class="far fa-tag"></span>&nbsp;roomba<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/ruby/"><span class="far fa-tag"></span>&nbsp;ruby<span class="badge pull-right">5</span></a></li><li class="hidden"><a href="/t/ruins/"><span class="far fa-tag"></span>&nbsp;ruins<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/s3/"><span class="far fa-tag"></span>&nbsp;s3<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/safari/"><span class="far fa-tag"></span>&nbsp;safari<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/salesforce/"><span class="far fa-tag"></span>&nbsp;salesforce<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/san-francisco/"><span class="far fa-tag"></span>&nbsp;san francisco<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/scrapmd/"><span class="far fa-tag"></span>&nbsp;scrapmd<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/scrippets/"><span class="far fa-tag"></span>&nbsp;scrippets<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/script/"><span class="far fa-tag"></span>&nbsp;script<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/seo/"><span class="far fa-tag"></span>&nbsp;seo<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/serverspec/"><span class="far fa-tag"></span>&nbsp;serverspec<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/setup/"><span class="far fa-tag"></span>&nbsp;setup<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/shell/"><span class="far fa-tag"></span>&nbsp;shell<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/simbl/"><span class="far fa-tag"></span>&nbsp;simbl<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/similar/"><span class="far fa-tag"></span>&nbsp;similar<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/similarity/"><span class="far fa-tag"></span>&nbsp;similarity<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/sketch/"><span class="far fa-tag"></span>&nbsp;sketch<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/slack/"><span class="far fa-tag"></span>&nbsp;slack<span class="badge pull-right">9</span></a></li><li class="hidden"><a href="/t/slide/"><span class="far fa-tag"></span>&nbsp;slide<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/snippets/"><span class="far fa-tag"></span>&nbsp;snippets<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/sony/"><span class="far fa-tag"></span>&nbsp;sony<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/spreadsheets/"><span class="far fa-tag"></span>&nbsp;spreadsheets<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/sql/"><span class="far fa-tag"></span>&nbsp;sql<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/sqlite/"><span class="far fa-tag"></span>&nbsp;sqlite<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/subversion/"><span class="far fa-tag"></span>&nbsp;subversion<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/sun/"><span class="far fa-tag"></span>&nbsp;sun<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/suncalc/"><span class="far fa-tag"></span>&nbsp;suncalc<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/svg/"><span class="far fa-tag"></span>&nbsp;svg<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/swfaddress/"><span class="far fa-tag"></span>&nbsp;swfaddress<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/swift/"><span class="far fa-tag"></span>&nbsp;swift<span class="badge pull-right">13</span></a></li><li class="hidden"><a href="/t/swifton/"><span class="far fa-tag"></span>&nbsp;swifton<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/taipei/"><span class="far fa-tag"></span>&nbsp;taipei<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/taiwan/"><span class="far fa-tag"></span>&nbsp;taiwan<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/tdd/"><span class="far fa-tag"></span>&nbsp;tdd<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/teamspirit/"><span class="far fa-tag"></span>&nbsp;teamspirit<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/template/"><span class="far fa-tag"></span>&nbsp;template<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/test/"><span class="far fa-tag"></span>&nbsp;test<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/testing/"><span class="far fa-tag"></span>&nbsp;testing<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/tf-idf/"><span class="far fa-tag"></span>&nbsp;tf-idf<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/thermometer/"><span class="far fa-tag"></span>&nbsp;thermometer<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/three20/"><span class="far fa-tag"></span>&nbsp;three20<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/tool/"><span class="far fa-tag"></span>&nbsp;tool<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/trac/"><span class="far fa-tag"></span>&nbsp;trac<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/travel/"><span class="far fa-tag"></span>&nbsp;travel<span class="badge pull-right">5</span></a></li><li class="hidden"><a href="/t/travis/"><span class="far fa-tag"></span>&nbsp;travis<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/travis-ci/"><span class="far fa-tag"></span>&nbsp;travis-ci<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/ubuntu/"><span class="far fa-tag"></span>&nbsp;ubuntu<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/uiappearance/"><span class="far fa-tag"></span>&nbsp;uiappearance<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/uikit/"><span class="far fa-tag"></span>&nbsp;uikit<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/virtualbox/"><span class="far fa-tag"></span>&nbsp;virtualbox<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/vm/"><span class="far fa-tag"></span>&nbsp;vm<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/vmware/"><span class="far fa-tag"></span>&nbsp;vmware<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/watches/"><span class="far fa-tag"></span>&nbsp;watches<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/watering/"><span class="far fa-tag"></span>&nbsp;watering<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/webfont/"><span class="far fa-tag"></span>&nbsp;webfont<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/webhook/"><span class="far fa-tag"></span>&nbsp;webhook<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/webpack/"><span class="far fa-tag"></span>&nbsp;webpack<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/websocket/"><span class="far fa-tag"></span>&nbsp;websocket<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/workflow/"><span class="far fa-tag"></span>&nbsp;workflow<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/wwdc/"><span class="far fa-tag"></span>&nbsp;wwdc<span class="badge pull-right">4</span></a></li><li class="hidden"><a href="/t/xcode/"><span class="far fa-tag"></span>&nbsp;xcode<span class="badge pull-right">8</span></a></li><li class="hidden"><a href="/t/xmlrpc/"><span class="far fa-tag"></span>&nbsp;xmlrpc<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/xmpp/"><span class="far fa-tag"></span>&nbsp;xmpp<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/yapc/"><span class="far fa-tag"></span>&nbsp;yapc<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/yo/"><span class="far fa-tag"></span>&nbsp;yo<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/zsh/"><span class="far fa-tag"></span>&nbsp;zsh<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/うどん/"><span class="far fa-tag"></span>&nbsp;うどん<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/しまなみ海道/"><span class="far fa-tag"></span>&nbsp;しまなみ海道<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/じゃらん/"><span class="far fa-tag"></span>&nbsp;じゃらん<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/じゃらんウェブサービス/"><span class="far fa-tag"></span>&nbsp;じゃらんウェブサービス<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/テクノ手芸/"><span class="far fa-tag"></span>&nbsp;テクノ手芸<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/会社/"><span class="far fa-tag"></span>&nbsp;会社<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/大久野島/"><span class="far fa-tag"></span>&nbsp;大久野島<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/尾道/"><span class="far fa-tag"></span>&nbsp;尾道<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/広島/"><span class="far fa-tag"></span>&nbsp;広島<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/所感/"><span class="far fa-tag"></span>&nbsp;所感<span class="badge pull-right">8</span></a></li><li class="hidden"><a href="/t/機材/"><span class="far fa-tag"></span>&nbsp;機材<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/登記/"><span class="far fa-tag"></span>&nbsp;登記<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/看板/"><span class="far fa-tag"></span>&nbsp;看板<span class="badge pull-right">1</span></a></li><li class="hidden"><a href="/t/買い物/"><span class="far fa-tag"></span>&nbsp;買い物<span class="badge pull-right">2</span></a></li><li class="hidden"><a href="/t/起業/"><span class="far fa-tag"></span>&nbsp;起業<span class="badge pull-right">2</span></a></li><li class="show-all"><a href="#tag-filter-form" class="show-all-tags-link"><span class="far fa-plus-square"></span>&nbsp;全て表示</a></li></ol></section><section><header><h2>Memos</h2></header><ol class="nav"><li><a href="/subscriptions/">Subscrptions</a></li></ol></section></aside></div><footer class="row"><div class="col-md-12 credit"><p>Proudly hosted on <a href="http://pages.github.com" rel="nofollow">GitHub Pages</a>.&nbsp;Theme by <a href="http://bootswatch.com/united/" rel="nofollow" class="bootswatch-link">United</a> from <a href="http://bootswatch.com/" rel="nofollow">Bootswatch</a>.&nbsp;Built on CircleCI <a href="https://circleci.com/gh/ngs/sources.ngs.io/521" rel="nofollow">build#521</a> with commit <a href="" rel="nofollow">5b73e69</a>.</p><p>Copyright &copy; 2020 <a href="https://ngs.io/" rel="copyright">Atsushi Nagase</a> all rights reserved with all articles and pictures. Everything else in <a href="https://github.com/ngs/source.ngs.io/">the repository</a> is <a href="https://github.com/ngs/sources.ngs.io/blob/master/LICENSE.md">MIT licensed</a>.</p></div></footer></div><script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-200187-34', 'auto');
  ga('send', 'pageview');
</script></body></html>